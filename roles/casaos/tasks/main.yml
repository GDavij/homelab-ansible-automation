- name: Assert that Distribution is Debian-based
  ansible.builtin.assert:
    that:
      - ansible_distribution in ['Ubuntu', 'Debian']
    fail_msg: >
      This role is only supported on Debian-based distributions.
      This appears to be a Gateway system running {{ ansible_distribution }}.
      CasaOS requires Ubuntu or Debian-based distributions.
  tags:
    - casaos

- name: Deploy Certificates to Container Volumes
  ansible.builtin.include_tasks:
    file: deploy-certificates.yml
  tags:
    - casaos
    - certificates

- name: Setup CasaOs system
  ansible.builtin.include_tasks:
    file: setup-casaos.yml
  tags:
    - casaos

- name: Setup Applications for CasaOs
  ansible.builtin.include_tasks:
    file: setup-applications.yml
  tags:
    - casaos
